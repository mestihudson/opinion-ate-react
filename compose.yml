services:
  build:
    image: node:18
    volumes:
    - .:/ws
    working_dir: /ws
    entrypoint: bash -xc "(source .entrypoint.build) || (test ! -e .entrypoint.build && cd opinion-ate && yarn install && yarn start)"
    ports:
    - 3000:3000
    environment:
    - DISPLAY=novnc:0.0
    depends_on:
    - novnc

  novnc:
    image: theasp/novnc:latest
    ports:
    - 48080:8080
    environment:
    - DISPLAY_WIDTH=1600
    - DISPLAY_HEIGHT=968
    - RUN_XTERM=no
